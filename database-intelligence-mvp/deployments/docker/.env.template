# Database Intelligence MVP - Environment Configuration Template
# Copy this file to .env and fill in your actual values

# =============================================================================
# NEW RELIC CONFIGURATION
# =============================================================================

# Your New Relic license key (required)
# Get this from: https://one.newrelic.com/admin-portal/api-keys-ui/api-keys
NEW_RELIC_LICENSE_KEY=NRAL-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# New Relic OTLP endpoint (usually no need to change)
OTLP_ENDPOINT=https://otlp.nr-data.net:4317

# =============================================================================
# DATABASE CONNECTIONS
# =============================================================================

# PostgreSQL Read Replica Connection String
# CRITICAL: Must point to read replica, NEVER primary database
# Format: postgres://username:password@hostname:port/database?sslmode=require
PG_REPLICA_DSN=postgres://newrelic_monitor:YOUR_PASSWORD@postgres-replica.company.com:5432/production?sslmode=require&application_name=db-intelligence-collector

# MySQL Read Replica Connection String (optional)
# Format: username:password@tcp(hostname:port)/database?tls=true
MYSQL_READONLY_DSN=newrelic_monitor:YOUR_PASSWORD@tcp(mysql-replica.company.com:3306)/production?tls=true&charset=utf8mb4

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment environment
DEPLOYMENT_ENV=production

# OpenTelemetry log level (debug, info, warn, error)
OTEL_LOG_LEVEL=info

# =============================================================================
# STORAGE PATHS
# =============================================================================

# Local path for persistent state storage (critical for deduplication)
STATE_STORAGE_PATH=./data/state

# Local path for log storage
LOG_STORAGE_PATH=./data/logs

# =============================================================================
# MONITORING CONFIGURATION (Optional)
# =============================================================================

# Grafana admin password (only if using monitoring profile)
GRAFANA_ADMIN_PASSWORD=secure_admin_password

# =============================================================================
# DOCKER BUILD CONFIGURATION
# =============================================================================

# Build metadata
BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ')
VCS_REF=$(git rev-parse --short HEAD)

# =============================================================================
# SECURITY NOTES
# =============================================================================

# 1. Never commit this file with real credentials to version control
# 2. Use Docker secrets or external secret management in production
# 3. Ensure database credentials are read-only and replica-only
# 4. Use strong passwords and rotate them regularly
# 5. Enable SSL/TLS for all database connections

# =============================================================================
# VALIDATION CHECKLIST
# =============================================================================

# Before running docker-compose up, verify:
# [ ] New Relic license key is valid
# [ ] Database connections point to read replicas only
# [ ] Database users have minimal required permissions
# [ ] SSL/TLS is enabled for database connections
# [ ] Storage paths exist and have correct permissions
# [ ] Network connectivity to databases is available